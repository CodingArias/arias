<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.kedu.arias.productMapper">

	<insert  id="product_insert_step1" parameterType="com.kedu.arias.product.dto.ProductDto" >
				INSERT INTO PRODUCT (  product_seq
                                       , p_main_img
                                       , member_id
                                       , product_name
                                       , product_price
                                       , country_id
                                       , product_addr
                                       , product_addr_detail
                                       , product_info
                                       , product_lat
                                       , product_lng
                                       , product_step)
                                       VALUES ( 
                                        #{product_seq,jdbcType=NUMERIC}
									  , #{p_main_img,jdbcType=VARCHAR}
                                      , #{member_id,jdbcType=VARCHAR}
                                      , #{product_name,jdbcType=VARCHAR}
                                      , #{product_price,jdbcType=NUMERIC}
                                      , #{country_id,jdbcType=VARCHAR}
                                      , #{product_addr,jdbcType=VARCHAR}
                                      , #{product_addr_detail,jdbcType=VARCHAR}
                                      , #{product_info,jdbcType=VARCHAR}
                                      , #{product_lat,jdbcType=NUMERIC}
                                      , #{product_lng,jdbcType=NUMERIC}
                                      , 1)
	</insert>
	<update id="product_insert_step2" parameterType="com.kedu.arias.product.dto.ProductDto">
	UPDATE PRODUCT
		SET product_mindt = #{product_mindt}
		,   product_maxdt = #{product_maxdt}
        ,   product_readydt = #{product_readydt}
        ,   product_prepdt = #{product_prepdt} 
	where product_seq = #{product_seq};
	</update>
	<select id="create_next_product_seq" parameterType="String" resultType="Integer">
		select create_next_product_seq from dual
	</select>
</mapper>

